<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Coins</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        
        body {
            background: #ffffff;
            color: #000000;
            min-height: 100vh;
            line-height: 1.4;
            overflow-x: hidden;
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            padding: 12px 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #e0e0e0;
            z-index: 1000;
            height: 60px;
        }
        
        .hamburger {
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }
        
        .logo {
            font-weight: bold;
            font-size: 18px;
            color: #000;
        }
        
        .search-icon {
            font-size: 20px;
            cursor: pointer;
            padding: 8px;
        }
        
        /* Main Content */
        .main-content {
            margin-top: 60px;
            padding: 20px;
            animation: fadeIn 0.5s ease;
        }
        
        .username-section {
            margin-bottom: 20px;
        }
        
        .username-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .username-input-container {
            display: flex;
            align-items: center;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 8px 12px;
            background: #f8f8f8;
        }
        
        .at-symbol {
            color: #666;
            margin-right: 8px;
            font-weight: 500;
        }
        
        .username-input {
            flex: 1;
            border: none;
            background: none;
            font-size: 16px;
            outline: none;
            color: #000;
        }
        
        .search-btn {
            background: #ff0050;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            margin-left: 8px;
            transition: background 0.3s ease;
        }
        
        .search-btn:hover {
            background: #e00046;
        }
        
        .balance {
            font-size: 18px;
            font-weight: 600;
            color: #000000;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .recharge-title {
            font-size: 16px;
            color: #000;
            margin-bottom: 8px;
            font-weight: 500;
        }
        
        .fee-notice {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .packages-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 25px;
        }
        
        .package-option {
            border: 1.5px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #ffffff;
            position: relative;
            overflow: hidden;
        }
        
        .package-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 0, 80, 0.1), transparent);
            transition: left 0.5s;
        }
        
        .package-option:hover::before {
            left: 100%;
        }
        
        .package-option.selected {
            border-color: #ff0050;
            background: #fff5f8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 0, 80, 0.15);
        }
        
        .coins-count {
            font-size: 16px;
            font-weight: 700;
            color: #000000;
            margin-bottom: 6px;
        }
        
        .price {
            font-size: 14px;
            color: #666666;
            font-weight: 500;
        }
        
        .custom-section {
            margin-bottom: 25px;
        }
        
        .custom-input-container {
            border: 1.5px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px 12px;
            text-align: center;
            background: #ffffff;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .custom-input-container:focus-within {
            border-color: #ff0050;
            background: #fff5f8;
        }
        
        .custom-input-container.selected {
            border-color: #ff0050;
            background: #fff5f8;
        }
        
        .custom-input {
            width: 100%;
            border: none;
            background: none;
            text-align: center;
            font-size: 16px;
            font-weight: 700;
            color: #000;
            margin-bottom: 6px;
            outline: none;
        }
        
        .custom-range {
            font-size: 14px;
            color: #666;
        }
        
        .payment-methods {
            display: flex;
            justify-content: space-between;
            margin: 25px 0;
            padding: 15px 0;
            border-top: 1px solid #e0e0e0;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .payment-method {
            width: 40px;
            height: 25px;
            background: #f0f0f0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            color: #666;
        }
        
        .total-section {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding: 16px 0;
        }
        
        .total-label {
            font-size: 18px;
            font-weight: 600;
        }
        
        .total-amount {
            font-size: 18px;
            font-weight: 700;
            color: #000;
        }
        
        .recharge-button {
            background: #ff0050;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .recharge-button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
        }
        
        .recharge-button:hover::before {
            width: 300px;
            height: 300px;
        }
        
        .recharge-button:hover {
            background: #e00046;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 0, 80, 0.3);
        }
        
        .recharge-button:active {
            transform: translateY(0);
        }
        
        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            width: 90%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            animation: slideUp 0.4s ease;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 20px 10px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: #666;
            transition: color 0.3s ease;
        }
        
        .close-btn:hover {
            color: #000;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .secure-notice {
            text-align: center;
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }
        
        .account-section {
            margin-bottom: 20px;
        }
        
        .account-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        .account-coins {
            font-size: 18px;
            font-weight: 700;
            color: #000;
        }
        
        .payment-methods-modal {
            margin-bottom: 20px;
        }
        
        .payment-title {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
        }
        
        .payment-option {
            display: flex;
            align-items: center;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .payment-option:hover {
            border-color: #ff0050;
            background: #fff5f8;
        }
        
        .payment-option.selected {
            border-color: #ff0050;
            background: #fff5f8;
            transform: translateX(5px);
        }
        
        .payment-icon {
            margin-right: 12px;
            font-size: 24px;
        }
        
        .payment-text {
            font-size: 16px;
            flex: 1;
        }
        
        .payment-subtext {
            font-size: 14px;
            color: #666;
            margin-top: 2px;
        }
        
        .terms {
            font-size: 12px;
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }
        
        .pay-now-button {
            background: #ff0050;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .pay-now-button:hover {
            background: #e00046;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(255, 0, 80, 0.3);
        }
        
        .hidden-checkbox {
            display: none;
        }
        
        .paypal-content {
            text-align: center;
            padding: 30px 20px;
        }
        
        .paypal-logo {
            font-size: 32px;
            color: #0070ba;
            margin-bottom: 20px;
        }
        
        .paypal-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .paypal-email {
            font-size: 16px;
            color: #666;
            margin-bottom: 30px;
        }
        
        .paypal-button {
            background: #0070ba;
            color: white;
            border: none;
            padding: 16px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            width: 100%;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }
        
        .paypal-button:hover {
            background: #005ea6;
            transform: translateY(-2px);
        }
        
        .paypal-cancel {
            background: none;
            border: 1px solid #e0e0e0;
            color: #666;
            padding: 12px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            width: 100%;
            transition: all 0.3s ease;
        }
        
        .paypal-cancel:hover {
            background: #f8f8f8;
        }
        
        /* Success Modal */
        .success-content {
            text-align: center;
            padding: 30px 20px;
        }
        
        .success-icon {
            font-size: 64px;
            color: #00cc66;
            margin-bottom: 20px;
            animation: bounce 0.6s ease;
        }
        
        .success-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .success-message {
            font-size: 16px;
            color: #666;
            margin-bottom: 25px;
            line-height: 1.4;
        }
        
        .back-button {
            background: #ff0050;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .back-button:hover {
            background: #e00046;
            transform: translateY(-2px);
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                opacity: 0;
                transform: translateY(50px);
            }
            to { 
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-10px);
            }
            60% {
                transform: translateY(-5px);
            }
        }
        
        .pulse {
            animation: pulse 9s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        .pulse {
            animation: pulse 9s infinite;
        }
        
        @keyframes pulse {
            0% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
            }
        }
        
        /* Loading Animation */
        .loading-content {
            text-align: center;
            padding: 50px 30px;
        }
        
        .loading-spinner {
            width: 80px;
            height: 80px;
            margin: 0 auto 25px;
            position: relative;
        }
        
        .red-circle {
            width: 60px;
            height: 60px;
            border: 5px solid #ff0050;
            border-top: 5px solid transparent;
            border-radius: 50%;
            animation: tiktok-spin 1s linear infinite;
            margin: 0 auto;
        }
        
        .loading-text {
            font-size: 16px;
            color: #666;
            font-weight: 500;
        }
        
        @keyframes tiktok-spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="search-icon"> <div class="size-[24px] flex justify-center items-center rounded-xl bg-white"><img alt="Логин" loading="lazy" width="23" height="22" decoding="async" data-nimg="1" style="color:transparent" src="https://cdn-icons-png.freepik.com/512/4782/4782345.png?ga=GA1.1.1751341094.1761754748"></div></div>
        <div class="logo">Get Coins</div>
        <div class="search-icon"> <div class="size-[24px] flex justify-center items-center rounded-xl bg-white"><img alt="Логин" loading="lazy" width="23" height="22" decoding="async" data-nimg="1" style="color:transparent" src="https://cdn-icons-png.freepik.com/128/1828/1828395.png"></div></div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="username-section">
            <div class="username-label">Enter username</div>
            <div class="username-input-container">
                <span class="at-symbol">@</span>
                <input type="text" class="username-input" id="usernameInput" placeholder="username">
                <button class="search-btn" id="searchButton">Search</button>
            </div>
        </div>
        
        
        
        <div class="recharge-title">Recharge:</div>
        <div class="fee-notice">Save around 25% with a lower third-party service fee.</div>
        
        <div class="packages-grid">
            <label class="package-option">
                <input type="radio" name="coinPackage" class="hidden-checkbox" value="30" data-price="0.31">
                <div class="coins-count">30</div>
                <div class="price">$0.31</div>
            </label>
            
            <label class="package-option">
                <input type="radio" name="coinPackage" class="hidden-checkbox" value="350" data-price="3.65">
                <div class="coins-count">350</div>
                <div class="price">$3.65</div>
            </label>
            
            <label class="package-option">
                <input type="radio" name="coinPackage" class="hidden-checkbox" value="700" data-price="7.25">
                <div class="coins-count">700</div>
                <div class="price">$7.25</div>
            </label>
            
            <label class="package-option">
                <input type="radio" name="coinPackage" class="hidden-checkbox" value="1400" data-price="14.49">
                <div class="coins-count">1400</div>
                <div class="price">$14.49</div>
            </label>
            
            <label class="package-option">
                <input type="radio" name="coinPackage" class="hidden-checkbox" value="3500" data-price="36.20">
                <div class="coins-count">3500</div>
                <div class="price">$36.20</div>
            </label>
        </div>
        
        <div class="custom-section">
            <div class="custom-input-container" id="customContainer">
                <input type="text" class="custom-input" id="customInput" placeholder="Custom">
                <div class="custom-range">30-2,500,000</div>
            </div>
        </div>
        
        <div class="payment-methods">
            <div class="payment-method"><div class="size-[24px] flex justify-center items-center rounded-xl bg-white"><img alt="Логин" loading="lazy" width="23" height="22" decoding="async" data-nimg="1" style="color:transparent" src="https://cdn-icons-png.freepik.com/512/5968/5968299.png?ga=GA1.1.1751341094.1761754748"></div></div></div>
            <div class="payment-method">●●●●</div>
            <div class="payment-method">●●●●</div>
            <div class="payment-method">●●●●</div>
            <div class="payment-method">●●●●</div>
        </div>
        
        <div class="total-section">
            <div class="total-label">Total</div>
            <div class="total-amount" id="totalAmount">$0.00</div>
        </div>
        
        <button class="recharge-button pulse" id="rechargeButton">Recharge</button>
    </div>
    
    <!-- Order Summary Modal -->
    <div class="modal" id="orderModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Order summary</div>
                <button class="close-btn" id="closeOrderModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="account-section">
                    <div class="account-title">Account</div>
                    <div class="account-username" id="selectedUsername">@username</div>
                    <div class="account-coins" id="selectedCoins">30 Coins</div>
                </div>
                
                <div class="payment-methods-modal">
                    <div class="payment-title">Select a payment method</div>
                    
                    <label class="payment-option" id="paypalOption">
                        <input type="radio" name="paymentMethod" class="hidden-checkbox" value="paypal">
                        <div class="payment-icon"><img alt="Онлайн-платежи Generic color lineal-color иконка" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" src="https://cdn-icons-png.freepik.com/512/888/888871.png?ga=GA1.1.1751341094.1761754748" style="color: transparent;"></div>
                        <div class="payment-text">
                            <div>PayPal</div>
                        </div>
                    </label>
                    
                    <label class="payment-option">
                        <input type="radio" name="paymentMethod" class="hidden-checkbox" value="card">
                        <div class="payment-icon"><img alt="ApplePay" loading="lazy" width="32" height="32" decoding="async" data-nimg="1" src="https://cdn-icons-png.freepik.com/512/5968/5968279.png?ga=GA1.1.1751341094.1761754748" style="color: transparent;"></div>
                        <div class="payment-text">
                            <div>Apple Pay</div>
                        </div>
                    </label>
                </div>
                
                <div class="terms">
                    By clicking "Pay now", you agree to our <strong>Terms of Purchase for Coins</strong>. By using any amount of Coins within 14 days after clicking "Pay now", you lose your right to withdraw from this purchase.
                </div>
                
                <button class="pay-now-button" id="payNowButton">Pay now</button>
            </div>
        </div>
    </div>
    
    <!-- PayPal Payment Modal -->
    <div class="modal" id="paypalModal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">Payment method</div>
                <button class="close-btn" id="closePaypalModal">&times;</button>
            </div>
            
            <div class="modal-body">
                <div class="paypal-content">
                    <div class="paypal-logo"><img alt="visa Brands Color иконка" loading="lazy" width="52" height="52" decoding="async" data-nimg="1" src="https://cdn-icons-png.freepik.com/512/5968/5968299.png?ga=GA1.1.1751341094.1761754748" style="color: transparent;"></div>
                    <div class="paypal-title">VISA</div>
                    <div class="paypal-email">PayPal: ********@email.com</div>
                    
                    <div class="total-section">
                        <div class="total-label">Total</div>
                        <div class="total-amount" id="paypalTotalAmount">$0.31</div>
                    </div>
                    
                    <button class="paypal-button" id="confirmPaypalButton">Buy</button>
                    <button class="paypal-cancel" id="cancelPaypalButton">Cancel</button>
                </div>
            </div>
        </div>
    </div>
 <!-- Loading Modal -->
    <div class="modal" id="loadingModal">
        <div class="modal-content">
            <div class="loading-content">
                <div class="loading-spinner">
                    <div class="red-circle"></div>
                </div>
                <div class="loading-text">Processing payment...</div>
            </div>
        </div>
    </div>
    
    <!-- Success Modal -->
    <div class="modal" id="successModal">
        <div class="modal-content">
            <div class="success-content">
                <div class="success-icon"><div class="size-[50px] flex justify-center items-center rounded-xl bg-white"><img alt="Круг Generic Others иконка" loading="lazy" width="64" height="64" decoding="async" data-nimg="1" src="https://cdn-icons-png.freepik.com/512/15644/15644765.png?ga=GA1.1.1751341094.1761754748" style="color: transparent;"></div></div>
                <div class="success-title">Successful recharge!</div>
                <div class="success-message">
                    <span id="successCoins">30 Coins</span> were sent to <span id="successUsername">@username</span><br><br>
                    This operation has been completed. It will be processed within 24 hours!
                </div>
                <button class="back-button" id="backButton">Back</button>
            </div>
        </div>
    </div>

    <script>
    // Elements
    const packageOptions = document.querySelectorAll('.package-option');
    const customInput = document.getElementById('customInput');
    const customContainer = document.getElementById('customContainer');
    const usernameInput = document.getElementById('usernameInput');
    const searchButton = document.getElementById('searchButton');
    const paymentOptions = document.querySelectorAll('.payment-option');
    const orderModal = document.getElementById('orderModal');
    const paypalModal = document.getElementById('paypalModal');
    const selectedUsername = document.getElementById('selectedUsername');
    const successModal = document.getElementById('successModal');
    const loadingModal = document.getElementById('loadingModal');
    const closeOrderModal = document.getElementById('closeOrderModal');
    const closePaypalModal = document.getElementById('closePaypalModal');
    const rechargeButton = document.getElementById('rechargeButton');
    const payNowButton = document.getElementById('payNowButton');
    const paypalOption = document.getElementById('paypalOption');
    const confirmPaypalButton = document.getElementById('confirmPaypalButton');
    const cancelPaypalButton = document.getElementById('cancelPaypalButton');
    const backButton = document.getElementById('backButton');
    const totalAmount = document.getElementById('totalAmount');
    const selectedCoins = document.getElementById('selectedCoins');
    const paypalTotalAmount = document.getElementById('paypalTotalAmount');
    const successCoins = document.getElementById('successCoins');
    const successUsername = document.getElementById('successUsername');
    
    let selectedPackage = null;
    let selectedPayment = null;

    // Update username in real-time when typing
    usernameInput.addEventListener('input', () => {
        const username = usernameInput.value.trim();
        if (username) {
            successUsername.textContent = `@${username}`;
            selectedUsername.textContent = `@${username}`; 
        } else {
            successUsername.textContent = '@username';
            selectedUsername.textContent = '@username'; 
        }
    });
    
    // Handle package selection
    packageOptions.forEach(option => {
        const checkbox = option.querySelector('input[type="radio"]');
        
        option.addEventListener('click', () => {
            // Remove selected class from all options
            packageOptions.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input[type="radio"]').checked = false;
            });
            
            // Remove custom selection
            customContainer.classList.remove('selected');
            customInput.value = '';
            
            // Add selected class to clicked option
            option.classList.add('selected');
            checkbox.checked = true;
            
            selectedPackage = {
                coins: checkbox.value,
                price: checkbox.getAttribute('data-price')
            };
            
            // Update total
            updateTotal();
        });
    });
    
    // Handle custom input selection
    customContainer.addEventListener('click', () => {
        // Remove selected from package options
        packageOptions.forEach(opt => {
            opt.classList.remove('selected');
            opt.querySelector('input[type="radio"]').checked = false;
        });
        
        // Add selected to custom
        customContainer.classList.add('selected');
        customInput.focus();
        
        if (customInput.value.trim() !== '') {
            selectedPackage = {
                coins: customInput.value,
                price: calculateCustomPrice(customInput.value)
            };
        }
        
        updateTotal();
    });
    
    // Handle custom input
    customInput.addEventListener('input', () => {
        if (customInput.value.trim() !== '') {
            selectedPackage = {
                coins: customInput.value,
                price: calculateCustomPrice(customInput.value)
            };
        } else {
            selectedPackage = null;
        }
        
        updateTotal();
    });
    
    // Handle search button
    searchButton.addEventListener('click', () => {
        const username = usernameInput.value.trim();
        if (username) {
            // Update both modals with the entered username
            successUsername.textContent = `@${username}`;
            selectedUsername.textContent = `@${username}`;
        } else {
            alert('Please enter a username');
        }
    });
    
    // Calculate custom price
    function calculateCustomPrice(coins) {
        const cleanCoins = coins.replace(/,/g, '');
        const coinsNum = parseInt(cleanCoins) || 0;
        
        // Calculate price based on coins (using the rate from the packages)
        if (coinsNum >= 30 && coinsNum <= 2500000) {
            // Using the rate from the first package: 30 coins = $0.31
            return (coinsNum / 30 * 0.31).toFixed(2);
        }
        return "0.00";
    }
    
    // Handle payment method selection
    paymentOptions.forEach(option => {
        const checkbox = option.querySelector('input[type="radio"]');
        
        option.addEventListener('click', () => {
            // Remove selected class from all options
            paymentOptions.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input[type="radio"]').checked = false;
            });
            
            // Add selected class to clicked option
            option.classList.add('selected');
            checkbox.checked = true;
            selectedPayment = checkbox.value;
        });
    });
    
    // Update total amount
    function updateTotal() {
        if (selectedPackage) {
            totalAmount.textContent = `$${selectedPackage.price}`;
        } else {
            totalAmount.textContent = '$0.00';
        }
    }
    
    // Show order modal when recharge button is clicked
    rechargeButton.addEventListener('click', () => {
        if (!selectedPackage) {
            alert('Please select a coin package or enter a custom amount');
            return;
        }
        
        const username = usernameInput.value.trim();
        if (!username) {
            alert('Please enter a username first');
            return;
        }
        
        // Update order modal content
        selectedCoins.textContent = parseInt(selectedPackage.coins).toLocaleString() + ' Coins';
        selectedUsername.textContent = `@${username}`;
        // Update success modal with current username
        successUsername.textContent = `@${username}`;
        
        // Show modal with animation
        orderModal.style.display = 'flex';
    });
    
    // Close order modal
    closeOrderModal.addEventListener('click', () => {
        orderModal.style.display = 'none';
    });
    
    // Handle pay now button click
    payNowButton.addEventListener('click', () => {
        if (!selectedPayment) {
            alert('Please select a payment method');
            return;
        }
        
        // Show loading modal
        orderModal.style.display = 'none';
        loadingModal.style.display = 'flex';
        
        // Simulate payment processing for 3 seconds
        setTimeout(() => {
            loadingModal.style.display = 'none';
            
            // Show success modal after loading
            successModal.style.display = 'flex';
            
            // Update success modal
            successCoins.textContent = parseInt(selectedPackage.coins).toLocaleString() + ' Coins';
        }, 3000);
    });
    
    // Handle PayPal confirmation
    confirmPaypalButton.addEventListener('click', () => {
        // Show loading modal
        paypalModal.style.display = 'none';
        loadingModal.style.display = 'flex';
        
        // Simulate payment processing for 3 seconds
        setTimeout(() => {
            loadingModal.style.display = 'none';
            
            // Show success modal after loading
            successModal.style.display = 'flex';
            
            // Update success modal
            successCoins.textContent = parseInt(selectedPackage.coins).toLocaleString() + ' Coins';
        }, 3000);
    });
    
    // Close PayPal modal
    closePaypalModal.addEventListener('click', () => {
        paypalModal.style.display = 'none';
    });
    
    cancelPaypalButton.addEventListener('click', () => {
        paypalModal.style.display = 'none';
    });
    
    // Handle back button click
    backButton.addEventListener('click', () => {
        successModal.style.display = 'none';
        
        // Reset selections
        packageOptions.forEach(opt => {
            opt.classList.remove('selected');
            opt.querySelector('input[type="radio"]').checked = false;
        });
        
        paymentOptions.forEach(opt => {
            opt.classList.remove('selected');
            opt.querySelector('input[type="radio"]').checked = false;
        });
        
        customContainer.classList.remove('selected');
        customInput.value = '';
        selectedPackage = null;
        selectedPayment = null;
        updateTotal();
    });
    
    // Close modals when clicking outside
    window.addEventListener('click', (event) => {
        if (event.target === orderModal) {
            orderModal.style.display = 'none';
        }
        if (event.target === paypalModal) {
            paypalModal.style.display = 'none';
        }
        if (event.target === successModal) {
            successModal.style.display = 'none';
            
            // Reset selections
            packageOptions.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input[type="radio"]').checked = false;
            });
            
            paymentOptions.forEach(opt => {
                opt.classList.remove('selected');
                opt.querySelector('input[type="radio"]').checked = false;
            });
            
            customContainer.classList.remove('selected');
            customInput.value = '';
            selectedPackage = null;
            selectedPayment = null;
            updateTotal();
        }
        if (event.target === loadingModal) { 
            loadingModal.style.display = 'none';
        }
    });

    // Auto-select first package for demo
    setTimeout(() => {
        if (packageOptions[0]) {
            packageOptions[0].click();
        }
    }, 500);
</script>
</body>
</html>
